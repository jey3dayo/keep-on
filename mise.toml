# ========================================
# グローバル設定
# ========================================

[env]
_.file = [".env"]
_.path = ["./node_modules/.bin"]

# ========================================
# ツール
# ========================================

[tools]
node = "24.12"
pnpm = "10.28.0"
taplo = "0.10.0"
"pipx:yamllint" = "latest"

# ========================================
# コマンド（実処理タスク）
# ========================================

[tasks.format]
description = "Ultracite(Biome)でソース全体を整形 + Taplo + Markdownlint"
run = [
  "pnpm run format",
  "taplo fmt mise.toml",
  "pnpm markdownlint-cli2 '**/*.md' '#node_modules' --fix",
]

[tasks."lint:types"]
description = "TypeScriptの型チェックのみ"
run = "pnpm tsc --noEmit"

[tasks."lint:biome"]
description = "Ultracite(Biome)のチェックのみ"
run = "pnpm run lint"

[tasks."lint:md"]
description = "Markdownのチェック"
run = "pnpm markdownlint-cli2 '**/*.md' '#node_modules'"

[tasks."lint:yaml"]
description = "YAMLのチェック"
run = "yamllint -c .yamllint .github/"

# ========================================
# エイリアス（まとめ実行）
# ========================================

[tasks.lint]
description = "型チェック + Biome + Markdown + YAML"
depends = ["lint:types", "lint:biome", "lint:md", "lint:yaml"]

[tasks.check]
description = "ローカル確認（format + lint）"
depends = ["format", "lint"]

[tasks."check:quick"]
description = "クイックチェック（型 + Biome）"
depends = ["lint:types", "lint:biome"]

[tasks.ci]
description = "CI相当のチェック（lint のみ）"
depends = ["lint"]
